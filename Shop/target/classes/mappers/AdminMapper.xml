<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
			"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pj.spring.mapper.adminMapper">
	
	<!-- 대시보드 주문 관리  건 수 -->
	<select id="orderCount" resultType="java.util.Map" >
		SELECT (select count(*) from ordered where ordered_status = 'D' and ordered_date = CURRENT_DATE) AS d_cnt
      		  ,(select count(*) from ordered where ordered_status = 'O' and ordered_date = CURRENT_DATE) AS o_cnt
      		  ,(select count(*) from payment where payment_type = 'PC' and payment_date = CURRENT_DATE) AS pc_cnt
	</select>
	
	<!-- 대시보드 취소 관리  건 수  -->
	<select id="cancelCount" resultType="java.util.Map" >
		SELECT (select count(*) from ordered where ordered_status = 'CW' and ordered_date = CURRENT_DATE) AS cw_cnt
      		  ,(select count(*) from ordered where ordered_status = 'CC' and ordered_date = CURRENT_DATE) AS cc_cnt
      		  ,(select count(*) from payment where payment_type = 'RW' and payment_date = CURRENT_DATE) AS rw_cnt
      		  ,(select count(*) from payment where payment_type = 'RC' and payment_date = CURRENT_DATE) AS rc_cnt
	</select>
	
	 <!-- 대시보드 리뷰/문의 관리  건 수  -->
	<select id="contentCount" resultType="java.util.Map" >
		SELECT (select count(review_no) from review where review_create_at = CURRENT_DATE) AS review_cnt
      		  ,(select count(*) from contact where contact_type = '주문문의' and contact_create_at = CURRENT_DATE) AS contactO_cnt
      		  ,(select count(*) from contact where contact_type = '상품문의' and contact_create_at = CURRENT_DATE) AS contactP_cnt
      		  ,(select count(*) from contact where contact_type = '기타문의' and contact_create_at = CURRENT_DATE) AS contactM_cnt
	</select>
	 
	<!-- 회원 관리 list -->
	<select id="userList" parameterType="java.util.Map" resultType="userVO" >
		SELECT *
		  FROM user 
		 WHERE user_type = 'U'
		 LIMIT #{start} , #{perPage}
	</select>
	
	<!-- 회원 전체 수 -->
	<select id="selectTotal" resultType="int">
		SELECT count(*)
		  FROM user
	</select>
	
	 
</mapper>